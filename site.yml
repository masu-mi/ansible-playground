---
- hosts: all
  become: no
  vars:
    - user_home: "/home/{{ user }}"
    - goroot:    "{{ user_home }}/go"
    - gopath:    "{{ user_home }}/dev"
    - go14root:  "{{ user_home }}/go1.4"
  pre_tasks:
    - set_fact:
        user: "{{ ansible_ssh_user }}"
      when: user is not defined
  roles:
    - develop
    - go
    - role: mongrelion.docker
      become: true
      become_user: root
      docker_version: 17.06
      docker_config:
        live-restore:   true
